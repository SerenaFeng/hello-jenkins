- parameter:
    name: project-parameter
    parameters:
        - string:
            name: VDCTC_GERRIT
            default: '{vdctc_gerrit}'
            description: "Git URL to use on this Jenkins Slave"
        - string:
            name: PROJECT_GERRIT
            default: '{project_gerrit}'
            description: "Git URL to use on this Jenkins Slave"

- scm:
    name: scm-gerrit-vdctc
    scm:
      - git:
          choosing-strategy: 'gerrit'
          refspec: '$GERRIT_REFSPEC'
          credentials-id: test_scm_id
          url: '$VDCTC_GERRIT'
          branches:
            - 'origin/master'
          timeout: 15

- scm:
    name: scm-gerrit-project
    scm:
      - git:
          choosing-strategy: 'gerrit'
          refspec: '$GERRIT_REFSPEC'
          credentials-id: test_scm_id
          url: '$PROJECT_GERRIT'
          branches:
            - 'origin/master'
          timeout: 15

- scm:
    name: scm-gerrit
    scm:
      - scm-gerrit-vdctc
      - scm-gerrit-project

- publisher:
    name: email-on-failure
    publishers:
        - email-ext:
            recipients: '{recipients}'
            body: '{body}'
            content-type: '{content-type}'
            always: false
            failure: true
            send-to:
                - recipients

- publisher:
    name: email-on-success
    publishers:
        - email-ext:
            recipients: '{recipients}'
            body: '{body}'
            content-type: '{content-type}'
            always: false
            failure: false
            success: true
            send-to:
                - recipients

